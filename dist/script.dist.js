var stationRepository=function(){var e=[];function t(){return e}function n(t){e.push(t)}function o(){document.querySelector("#loading-box").classList.add("showing")}function i(){document.querySelector("#loading-box").classList.remove("showing")}function a(e){return o(),document.querySelector("#tone").play(),fetch(e.lineUrl).then(function(e){return e.json()}).then(function(t){t=t[0],e.line=t.line,e.letter=t.letter,e.hex=t.hex,e.terminal1=t.terminal1,e.terminal2=t.terminal2,e.weight=t.weight,e.logoUrl=t.logoUrl,e.infoUrl=t.infoUrl,setTimeout(i,500)}).catch(function(e){console.error(e),setTimeout(i,500)})}return{getAll:t,add:n,addListItem:function e(t){var n=document.querySelector(".information-box__list"),o=document.createElement("li"),i=document.createElement("button");i.innerText=t.name,i.classList.add("information-box__button"),o.appendChild(i),n.appendChild(o),function e(t,n){t.addEventListener("click",function(){(function e(t){a(t).then(function(){console.log(t),modalTools.openModal(t)})})(n)})}(i,t)},loadList:function e(){return o(),fetch("https://delacorteclock.github.io/LA-Metro-Stations/stationdatabase.json").then(function(e){return e.json()}).then(function(e){e.forEach(function(e){var t={name:e.name,id:e.id,lineUrl:"https://delacorteclock.github.io/LA-Metro-Stations/lines/"+e.line.toLowerCase()+".json"};n(t),console.log(t),setTimeout(i,1500)})}).catch(function(e){console.error(e),setTimeout(i,1500)})},loadDetails:a}}(),modalTools=function(){function e(){document.querySelector("#station-box").classList.remove("showing"),t()}function t(){document.querySelector("#tone").play()}return window.addEventListener("keydown",function(e){var n=document.querySelector("#station-box");"Escape"===e.key&&n.classList.contains("showing")&&(n.classList.remove("showing"),t())}),{openModal:function t(n){var o=document.querySelector("#station-box");o.innerHTML="";var i=document.createElement("div");i.classList.add("station-box__contents");var a=document.createElement("h1");a.classList.add("station-box__head"),1===n.letter.length?a.innerHTML=`Line ${n.letter}: <span style='color: ${n.hex}'>${n.line}</span>`:a.innerHTML=`Lines ${n.letter}: ${n.line}`;var r=document.createElement("a");r.href=n.infoUrl;var l=document.createElement("img");l.src=n.logoUrl,l.id="line-img",r.appendChild(l);var s=document.createElement("p");s.classList.add("station-box__paragraph"),1===n.letter.length?s.innerText=`You selected ${n.name}: ${n.line} Line station ${n.id}. The ${n.line} (${n.letter}) Line of the LACMTA's Metro Rail system is a  ${n.weight.toLowerCase()} rail line which runs from ${n.terminal1} to ${n.terminal2}. To learn more about the ${n.line} Line please click the line logo above this paragraph to visit a LACMTA page where you can access its map and schedule.`:s.innerText=`You selected ${n.name}: ${n.line} Line station ${n.id}. The ${n.line} (${n.letter}) Lines of the LACMTA's Metro Rail system are  ${n.weight.toLowerCase()} rail lines in the Los Angeles region. To learn more about the ${n.line} lines please click the line logo above this paragraph to visit a LACMTA page where you can access a map and schedule for either line.`;var c=document.createElement("button");c.id="station-box__closer",c.innerText="CLOSE",c.addEventListener("click",e),i.appendChild(a),i.appendChild(r),i.appendChild(s),i.appendChild(c),o.appendChild(i),o.classList.add("showing"),o.addEventListener("click",function(t){t.target===o&&e()})}}}(),trainStops=stationRepository.getAll();function informationLoop(e){stationRepository.addListItem(e)}trainStops.forEach(informationLoop),stationRepository.loadList().then(function(){stationRepository.getAll().forEach(function(e){stationRepository.addListItem(e)})});